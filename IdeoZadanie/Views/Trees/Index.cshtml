@model IEnumerable<IdeoZadanie.Models.Tree>

@{
    ViewBag.Title = "Index";
}

@helper DisplayList(IdeoZadanie.Models.Tree tree)
{
    <li>
        <div class="btn-group" role="group" aria-label="...">
            <a href='@Url.Action("Delete", "Trees", new { id = tree.Id})'>
                @*<button type="button" class="close" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>*@
                <span class="glyphicon glyphicon-trash"></span>
            </a>
            <a href='@Url.Action("Edit", "Trees", new { id = tree.Id})'>
                <span class="glyphicon glyphicon-pencil"></span>
            </a>
            <a href='@Url.Action("Create", "Trees", new { id = tree.Id})'>
                <span class="glyphicon glyphicon-plus"></span>
            </a>
        </div>
        @if (tree.Childrens.Where(tr => tr.Id != tree.Id).ToList().Count > 0)
        {
            <span class="caretList">@Html.DisplayFor(modelItem => tree.Name)</span>
            <ul class="nested">
                @foreach (var t in tree.Childrens.Where(tr => tr.Id != tree.Id))
                {
                    @DisplayList(t);
                }
            </ul>
        } else
        {
            @Html.DisplayFor(modelItem => tree.Name)
        }
    </li>
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<ul id="list">
    @foreach (var item in Model.Where(tree => tree.ParentId == tree.Id))
    {
        @DisplayList(item)
    }
</ul>